<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Loom GraphQL JSON PoC</title>
</head>
<body>
  <h1>Loom GraphQL PoC (application/json)</h1>
  <p>打开控制台，你会看到浏览器发起了一个带 <code>Content-Type: application/json</code> 的预检，然后被 CORS 拦截：</p>
  <script>
    const payload = {
      operationName: "AtlassianLocaleResponse",
      variables: {},
      query: `query AtlassianLocaleResponse {
        atlassianLocaleResponse {
          localeRequiresMarketingOptIn
          locale
          __typename
        }
        __typename
      }`
    };

    fetch("https://www.loom.com/graphql", {
      method: "POST",
      mode: "cors",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(payload)
    })
    .then(r => r.json())
    .then(data => console.log("✅ 成功拿到数据:", data))
    .catch(err => console.error("❌ 被 CORS 拦截:", err));
  </script>
</body>
</html>
